# Руководство по созданию .exe файла для "Финансовый Менеджер"

## Предварительные требования

Для создания .exe файла вам потребуется:

1. **JDK 17 или выше** - скачайте с [официального сайта Oracle](https://www.oracle.com/java/technologies/downloads/) или используйте OpenJDK
2. **Maven 3.8.0 или выше** - скачайте с [официального сайта Maven](https://maven.apache.org/download.cgi)
3. **Launch4j** - скачайте с [официального сайта Launch4j](http://launch4j.sourceforge.net/)

## Метод 1: Создание .exe с помощью Maven и Launch4j

### Шаг 1: Подготовка проекта

Скопируйте весь проект на ваш Windows-компьютер.

### Шаг 2: Сборка проекта с помощью Maven

Откройте командную строку Windows (cmd) в корневой папке проекта и выполните команду:

```
mvn clean package
```

После успешного выполнения команды в папке `target` вы найдете файл:
- `FinanceManager-1.0-SNAPSHOT.jar` (создан плагином maven-assembly-plugin)

### Шаг 3: Создание .exe с помощью Launch4j

Если плагин launch4j-maven-plugin работает корректно, .exe файл должен быть автоматически создан в папке `target` как `FinanceManager.exe`. Если этого не произошло, выполните следующие шаги:

1. Установите и запустите Launch4j.
2. В Launch4j заполните следующие поля:
   - **Basic**:
     - Output file: путь к будущему .exe файлу (например, `C:\path\to\project\target\FinanceManager.exe`)
     - Jar: путь к JAR-файлу (например, `C:\path\to\project\target\FinanceManager-1.0-SNAPSHOT.jar`)
   - **JRE**:
     - Min JRE version: 17.0.0
   - **Classpath**:
     - Main class: `com.financemanager.Main`
   - **Header**:
     - Header type: GUI

3. Нажмите кнопку "Build wrapper" для создания .exe файла.

## Метод 2: Использование jpackage (JDK 14+)

JDK 14 и выше включает инструмент `jpackage`, который может создавать нативные установщики для различных платформ, включая Windows .exe/.msi.

### Шаг 1: Подготовка проекта

Скопируйте весь проект на ваш Windows-компьютер.

### Шаг 2: Сборка JAR-файла

Выполните в командной строке:

```
mvn clean package
```

### Шаг 3: Создание установщика с помощью jpackage

```
jpackage --input target/ ^
  --main-jar FinanceManager-1.0-SNAPSHOT.jar ^
  --main-class com.financemanager.Main ^
  --name "FinансовыйМенеджер" ^
  --app-version 1.0 ^
  --vendor "Ваше Имя" ^
  --win-menu ^
  --win-shortcut ^
  --icon path\to\icon.ico
```

> Примечание: Параметр `--icon` необязательный. Если у вас есть файл иконки .ico, вы можете указать путь к нему.

Это создаст установщик Windows (.msi или .exe), который включает JRE и все необходимые зависимости.

## Метод 3: Создание полноценного установщика

Если вы хотите создать более настраиваемый установщик, вы можете использовать специализированные инструменты:

1. **Inno Setup**:
   - Скачайте и установите [Inno Setup](https://jrsoftware.org/isinfo.php)
   - Создайте скрипт установки (.iss), включающий ваш .jar или .exe файл
   - Скомпилируйте скрипт для создания установщика

2. **NSIS (Nullsoft Scriptable Install System)**:
   - Скачайте и установите [NSIS](https://nsis.sourceforge.io/)
   - Создайте скрипт NSIS, включающий все необходимые файлы
   - Скомпилируйте скрипт для создания установщика

## Распространение приложения

При распространении приложения "Финансовый Менеджер" важно учесть следующее:

1. **Зависимости**: Убедитесь, что все необходимые зависимости включены в пакет.
2. **Java Runtime**: Если вы не используете jpackage для включения JRE, пользователи должны иметь установленную Java 17 или выше.
3. **База данных**: Файл базы данных SQLite должен либо быть включен в установщик, либо создаваться автоматически при первом запуске приложения.
4. **Ресурсы приложения**: Убедитесь, что все ресурсы (изображения, файлы локализации и т.д.) правильно включены в пакет.

## Решение проблем

### Проблема: "JavaFX runtime components are missing"

Если при запуске .exe файла возникает ошибка о отсутствии компонентов JavaFX runtime:

1. Используйте jpackage для создания установщика, который включает все необходимые компоненты JavaFX.
2. Или создайте .bat файл, который запускает приложение с правильными параметрами:

```bat
@echo off
java --module-path "%~dp0\lib" --add-modules javafx.controls,javafx.fxml -jar "%~dp0\FinanceManager-1.0-SNAPSHOT.jar"
```

В этом случае вам нужно также распространять папку lib со всеми необходимыми JAR-файлами JavaFX.

### Проблема: "Не найден main класс"

Убедитесь, что в MANIFEST.MF вашего JAR-файла правильно указан Main-Class. Вы можете проверить это, открыв JAR-файл как архив и просмотрев файл META-INF/MANIFEST.MF.
