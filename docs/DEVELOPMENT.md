# Руководство по разработке

Это руководство предназначено для разработчиков, которые хотят внести свой вклад в проект "Финансовый Менеджер" или расширить его функциональность.

## Архитектура приложения

Приложение "Финансовый Менеджер" построено по архитектуре MVC (Model-View-Controller):

1. **Model (Модель)**
   - `DataAccess.java` - класс для работы с базой данных SQLite
   - `Transaction.java` - модель транзакции (доход или расход)
   - `Category.java` - модель категории
   - `Budget.java` - модель бюджета

2. **View (Представление)**
   - `View.java` - класс, отвечающий за инициализацию пользовательского интерфейса
   - `main_window.fxml` - разметка GUI в формате FXML
   - `styles.css` - стили для пользовательского интерфейса

3. **Controller (Контроллер)**
   - `Controller.java` - контроллер FXML, обрабатывающий пользовательские действия
   - `Main.java` - основной класс для запуска JavaFX приложения
   - `MainApp.java` - вспомогательный класс запуска для решения проблем с модулями JavaFX

## Структура базы данных

База данных использует SQLite и содержит следующие таблицы:

### Таблица Categories
```sql
CREATE TABLE IF NOT EXISTS Categories (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    type TEXT NOT NULL
);
```
- `id` - уникальный идентификатор категории
- `name` - название категории
- `type` - тип категории: "Income" (доход) или "Expense" (расход)

### Таблица Transactions
```sql
CREATE TABLE IF NOT EXISTS Transactions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date TEXT NOT NULL,
    type TEXT NOT NULL,
    category_id INTEGER NOT NULL,
    amount REAL NOT NULL,
    description TEXT,
    FOREIGN KEY (category_id) REFERENCES Categories(id)
);
```
- `id` - уникальный идентификатор транзакции
- `date` - дата транзакции в формате ISO (YYYY-MM-DD)
- `type` - тип транзакции: "Income" (доход) или "Expense" (расход)
- `category_id` - идентификатор категории (внешний ключ)
- `amount` - сумма в рублях
- `description` - описание транзакции

### Таблица Budgets
```sql
CREATE TABLE IF NOT EXISTS Budgets (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    category_id INTEGER NOT NULL,
    amount REAL NOT NULL,
    FOREIGN KEY (category_id) REFERENCES Categories(id)
);
```
- `id` - уникальный идентификатор бюджета
- `category_id` - идентификатор категории (внешний ключ)
- `amount` - сумма бюджета в рублях

## Процесс сборки

Проект собирается с помощью Maven и включает следующие цели:

- `mvn compile` - компиляция исходных файлов
- `mvn javafx:run` - запуск приложения через JavaFX Maven Plugin
- `mvn package` - создание JAR-файла
- `mvn clean package` - очистка и создание нового JAR-файла

## Добавление новых функций

### Добавление новых категорий

Категории хранятся в базе данных, но вы можете изменить стандартные категории, отредактировав метод `testCategories()` в классе `TestApp.java`.

### Расширение UI

Для изменения пользовательского интерфейса:

1. Отредактируйте файл `main_window.fxml` с помощью Scene Builder или вручную
2. Обновите соответствующие методы обработки в `Controller.java`
3. При необходимости добавьте новые стили в `styles.css`

### Добавление новых типов отчетов

Для создания новых отчетов:

1. Добавьте методы анализа данных в `DataAccess.java`
2. Создайте представление в FXML
3. Реализуйте контроллер для отображения данных

## Тестирование

### Модульное тестирование

Для тестирования приложения в средах без GUI используйте:

- `TestApp.java` - тестирование основных компонентов
- `test_app.sh` - скрипт для запуска тестов

### Ручное тестирование

1. Запустите приложение с помощью `./run_finance_manager.sh`
2. Проверьте основные функции:
   - Добавление новых транзакций (доходов и расходов)
   - Фильтрация и поиск транзакций
   - Создание и редактирование бюджетов
   - Просмотр отчетов и статистики

## Рекомендации по кодированию

1. Следуйте Java Code Conventions
2. Добавляйте комментарии и JavaDoc
3. Реализуйте обработку исключений для улучшения стабильности
4. Поддерживайте русскоязычный интерфейс приложения
5. Используйте ₽ в качестве символа рубля для отображения сумм
